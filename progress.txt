## 2026-01-06: Income Management Backend

Implemented income management backend feature (PRD item #3):

### Added files:
- packages/db/src/schemas/incomes.ts - income table schema with period enum (daily/weekly/monthly/yearly)
- apps/backend/src/routers/income/service.ts - CRUD service for incomes
- apps/backend/src/routers/income/controller.ts - REST endpoints (GET/POST/PATCH/DELETE /incomes)

### Modified files:
- packages/db/src/schemas/index.ts - export incomes
- packages/db/src/types.ts - Income types + zod schemas
- packages/db/src/relations.ts - user-income relation
- apps/backend/src/index.ts - register incomesRouter

### Notes for next dev:
- Period validation via pgEnum (drizzle handles invalid values)
- User filtering enforced in controller via auth middleware
- Next feature: Income UI (PRD item #4) or Personal expense backend (PRD item #5)

## 2026-01-06: Income Management UI

Implemented income management UI (PRD item #4):

### Added files:
- apps/web/src/lib/queries/incomes.queries.ts - query options for fetching incomes
- apps/web/src/lib/mutations/incomes.mutations.ts - mutations for create/update/delete
- apps/web/src/components/income/income-list.tsx - list of incomes
- apps/web/src/components/income/income-item.tsx - single income row with edit/delete
- apps/web/src/components/income/add-income-form.tsx - form to add new income
- apps/web/src/components/income/edit-income-dialog.tsx - dialog to edit income
- apps/web/src/components/income/income-list-card.tsx - card wrapper for income UI
- apps/web/src/routes/incomes.tsx - /incomes route page

### Modified files:
- apps/web/src/lib/queries/keys.ts - added incomes query keys
- apps/web/src/components/navigation/navbar.tsx - added Incomes link for logged-in users

### Notes for next dev:
- Period displayed as €X/mo, €X/week etc via formatAmount helper
- Edit dialog supports optional end_date
- No delete confirmation modal (inline delete like todos) - simple UX
- Next feature: Personal expense backend (PRD item #5)

## 2026-01-10: Personal Expense Management Backend

Implemented expense backend (PRD item #5):

### Added files:
- packages/db/src/schemas/expenses.ts - expense table w/ type enum (one_time/recurring), period enum, active flag
- apps/backend/src/routers/expense/service.ts - CRUD service
- apps/backend/src/routers/expense/controller.ts - REST endpoints w/ validation (one_time needs targetDate, recurring needs period+startDate)

### Modified files:
- packages/db/src/schemas/index.ts - export expenses
- packages/db/src/types.ts - Expense types + zod schemas
- packages/db/src/relations.ts - user-expense relation
- apps/backend/src/index.ts - register expensesRouter

### Notes for next dev:
- Schema has householdId (nullable) + active flag for future household features
- targetDate used for one_time, startDate/endDate/period for recurring
- Validation in controller via zod refine
- Next feature: Personal expense UI (PRD item #6)

## 2026-01-10: Personal Expense Management UI

Implemented expense UI (PRD item #6):

### Added files:
- apps/web/src/lib/queries/expenses.queries.ts - query options for expenses
- apps/web/src/lib/mutations/expenses.mutations.ts - create/update/delete mutations
- apps/web/src/components/expense/expense-fields.tsx - form fields w/ type toggle (one-time/recurring), uses withForm composition
- apps/web/src/components/expense/expense-list.tsx - list of expenses
- apps/web/src/components/expense/expense-item.tsx - expense row w/ type icons (CalendarDays/Repeat), remaining duration display
- apps/web/src/components/expense/add-expense-form.tsx - add expense form
- apps/web/src/components/expense/edit-expense-dialog.tsx - edit dialog
- apps/web/src/components/expense/expense-list-card.tsx - card wrapper
- apps/web/src/components/ui/alert-dialog.tsx - alert dialog component (base-ui)
- apps/web/src/routes/expenses.tsx - /expenses route

### Modified files:
- apps/web/src/lib/queries/keys.ts - added expenses query keys
- apps/web/src/components/navigation/navbar.tsx - added Expenses link

### Notes for next dev:
- Type toggle shows/hides fields dynamically via form.Subscribe
- One-time shows targetDate, recurring shows period+startDate+endDate
- Delete uses AlertDialog w/ confirmation
- Remaining duration calc shows "X months left" for recurring w/ endDate
- Type icons: CalendarDays for one_time, Repeat for recurring
- Next feature: Pocket management backend (PRD item #7)
