[
  {
    "category": "backend",
    "description": "User authentication system",
    "tasks": [
      "Create user table (id, email, password_hash, name, created_at)",
      "Implement registration endpoint",
      "Implement login endpoint with session/token",
      "Implement logout endpoint",
      "Add authentication middleware"
    ],
    "passes": false
  },
  {
    "category": "ui",
    "description": "Authentication pages",
    "tasks": [
      "Create registration form (email, password, name)",
      "Create login form",
      "Add form validation",
      "Handle auth errors display",
      "Redirect to dashboard on success"
    ],
    "passes": false
  },
  {
    "category": "backend",
    "description": "Income management",
    "tasks": [
      "Create income table (id, user_id, name, amount, period, start_date, end_date, created_at)",
      "Implement CRUD endpoints for incomes",
      "Validate period values (monthly, yearly, etc.)",
      "Filter incomes by user"
    ],
    "passes": false
  },
  {
    "category": "ui",
    "description": "Income management interface",
    "tasks": [
      "Create income list view",
      "Create income form (name, amount, period, start_date, optional end_date)",
      "Add edit income modal/page",
      "Add delete income confirmation",
      "Display formatted period (e.g., 'â‚¬2000/month')"
    ],
    "passes": false
  },
  {
    "category": "backend",
    "description": "Personal expense management",
    "tasks": [
      "Create expense table (id, user_id, household_id nullable, name, amount, type, period, start_date, end_date, created_at)",
      "Type enum: one_time, recurring",
      "Implement CRUD endpoints for personal expenses",
      "Validate: one_time requires target date, recurring requires period + start_date",
      "Filter expenses by user"
    ],
    "passes": false
  },
  {
    "category": "ui",
    "description": "Personal expense management interface",
    "tasks": [
      "Create expense list view with type indicators",
      "Create expense form with type toggle (one-time vs recurring)",
      "Show/hide fields based on type selection",
      "Add edit expense modal/page",
      "Add delete expense confirmation",
      "Display loan-style expenses with remaining duration"
    ],
    "passes": false
  },
  {
    "category": "backend",
    "description": "Pocket management",
    "tasks": [
      "Create pocket table (id, user_id, name, amount, created_at)",
      "Implement CRUD endpoints for pockets",
      "Filter pockets by user"
    ],
    "passes": false
  },
  {
    "category": "ui",
    "description": "Pocket management interface",
    "tasks": [
      "Create pocket list view",
      "Create pocket form (name, amount)",
      "Add edit pocket modal/page",
      "Add delete pocket confirmation",
      "Display pockets as budget cards"
    ],
    "passes": false
  },
  {
    "category": "backend",
    "description": "Household creation and membership",
    "tasks": [
      "Create household table (id, name, split_mode, created_at)",
      "Create household_member table (id, household_id, user_id, joined_at)",
      "split_mode enum: equal, income_proportional",
      "Implement create household endpoint (creator auto-joins)",
      "Implement leave household endpoint",
      "On leave: disable all household expenses (set active=false or similar)",
      "Prevent joining multiple households"
    ],
    "passes": false
  },
  {
    "category": "backend",
    "description": "Household invitation system",
    "tasks": [
      "Create invitation table (id, household_id, email, token, status, created_at, expires_at)",
      "Implement send invitation endpoint",
      "Implement accept invitation endpoint",
      "Implement decline invitation endpoint",
      "Invalidate invitation on accept/decline/expire"
    ],
    "passes": false
  },
  {
    "category": "ui",
    "description": "Household management interface",
    "tasks": [
      "Create household settings page",
      "Display current members list",
      "Add invite member form (email input)",
      "Add leave household button with confirmation",
      "Toggle split mode (equal vs income-proportional)",
      "Show pending invitations"
    ],
    "passes": false
  },
  {
    "category": "ui",
    "description": "Household invitation flow",
    "tasks": [
      "Create invitation landing page (via token link)",
      "Display household name and inviter",
      "Accept/decline buttons",
      "Handle already-in-household error",
      "Redirect to dashboard on accept"
    ],
    "passes": false
  },
  {
    "category": "backend",
    "description": "Household expense management",
    "tasks": [
      "Extend expense table to support household_id",
      "Implement CRUD endpoints for household expenses",
      "Validate user belongs to household",
      "Filter household expenses by household_id"
    ],
    "passes": false
  },
  {
    "category": "ui",
    "description": "Household expense interface",
    "tasks": [
      "Create household expense list view",
      "Create household expense form (same fields as personal)",
      "Display split amount per member",
      "Add edit/delete with confirmation",
      "Indicate disabled expenses (from member departure)"
    ],
    "passes": false
  },
  {
    "category": "backend",
    "description": "Monthly balance calculation engine",
    "tasks": [
      "Calculate total income for a given month (sum active recurring incomes)",
      "Calculate personal expenses for a month (one-time in that month + recurring active)",
      "Calculate household expense share (based on split mode)",
      "For income-proportional: compute each member's income ratio",
      "Calculate total pockets sum",
      "Return: income, personal_expenses, household_share, pockets, remaining"
    ],
    "passes": false
  },
  {
    "category": "backend",
    "description": "Future month projections",
    "tasks": [
      "Project recurring incomes into future months (respect end_date)",
      "Project recurring expenses into future months (respect end_date)",
      "Project household expenses into future months",
      "Apply current pocket values to future months",
      "Return projection data for N months ahead"
    ],
    "passes": false
  },
  {
    "category": "backend",
    "description": "Monthly snapshot system",
    "tasks": [
      "Create snapshot table (id, user_id, month, year, data_json, created_at)",
      "Scheduled job: archive previous month on 1st of each month",
      "Store: incomes, expenses, household_share, pockets, remaining as JSON",
      "Implement get snapshot endpoint (by month/year)"
    ],
    "passes": false
  },
  {
    "category": "ui",
    "description": "Monthly dashboard view",
    "tasks": [
      "Display current month overview",
      "Show total income",
      "Show personal expenses total (with expandable list)",
      "Show household expenses share (with expandable list)",
      "Show pockets total (with expandable list)",
      "Show remaining balance (green if positive, red if negative)",
      "Month navigation (previous/next)"
    ],
    "passes": false
  },
  {
    "category": "ui",
    "description": "Past month snapshot view",
    "tasks": [
      "Detect when viewing past month",
      "Fetch snapshot instead of live calculation",
      "Display snapshot data in same layout as current month",
      "Indicate 'viewing archived data' badge",
      "Disable editing for past months"
    ],
    "passes": false
  },
  {
    "category": "ui",
    "description": "Future month projection view",
    "tasks": [
      "Detect when viewing future month",
      "Fetch projection data",
      "Display projection in same layout",
      "Indicate 'projection' badge",
      "Show which recurring items contribute"
    ],
    "passes": false
  },
  {
    "category": "ui",
    "description": "Dashboard warnings and indicators",
    "tasks": [
      "Red warning banner when remaining balance is negative",
      "Display deficit amount prominently",
      "Visual distinction between expense types (one-time, recurring, loan)",
      "Highlight expenses ending soon"
    ],
    "passes": false
  },
  {
    "category": "functional",
    "description": "Expense recurrence logic",
    "tasks": [
      "Support periods: daily, weekly, monthly, yearly",
      "Calculate if expense is active for a given month",
      "Handle start_date (expense starts in future)",
      "Handle end_date (expense expires)",
      "Loan = recurring with calculated end_date based on duration"
    ],
    "passes": false
  },
  {
    "category": "functional",
    "description": "Income-proportional split calculation",
    "tasks": [
      "Sum all household members' monthly incomes",
      "Calculate each member's percentage",
      "Apply percentage to household expense total",
      "Handle edge case: member with zero income",
      "Recalculate on income change"
    ],
    "passes": false
  },
  {
    "category": "ui",
    "description": "Navigation and layout",
    "tasks": [
      "Create main navigation (Dashboard, Incomes, Expenses, Pockets, Household)",
      "Responsive layout for mobile/desktop",
      "User menu with logout",
      "Household indicator in header (if member)"
    ],
    "passes": false
  },
  {
    "category": "functional",
    "description": "Member departure handling",
    "tasks": [
      "On member leave: flag all household expenses as disabled",
      "Remaining members see disabled expenses in list",
      "Remaining members can re-enable or delete disabled expenses",
      "Disabled expenses excluded from calculations"
    ],
    "passes": false
  }
]